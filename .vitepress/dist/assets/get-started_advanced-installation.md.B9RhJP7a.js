import{_ as a,c as i,o as e,ag as t}from"./chunks/framework.1L-BeKqY.js";const g=JSON.parse('{"title":"Advanced Installation","description":"","frontmatter":{},"headers":[],"relativePath":"get-started/advanced-installation.md","filePath":"get-started/advanced-installation.md","lastUpdated":null}'),n={name:"get-started/advanced-installation.md"};function l(o,s,p,r,h,d){return e(),i("div",null,s[0]||(s[0]=[t(`<h1 id="advanced-installation" tabindex="-1">Advanced Installation <a class="header-anchor" href="#advanced-installation" aria-label="Permalink to &quot;Advanced Installation&quot;">​</a></h1><p>If you don&#39;t like using install scripts, but you like doing stuff yourself, then you can install screenie manually using this guide.</p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ul><li><strong>Operating System</strong>: Ubuntu or any Debian-based Linux distribution.</li><li><strong>Root Access</strong>: You need to have root or sudo access on the system.</li><li><strong>Internet Connection</strong>: Ensure the system is connected to the internet for downloading packages.</li><li><strong>Dependencies</strong>: <ul><li><strong>Node.js</strong>: JavaScript runtime for the application.</li><li><strong>npm</strong>: Node.js package manager for managing dependencies.</li><li><strong>MariaDB</strong>: Database server to store and manage application data.</li><li><strong>Git</strong>: Version control system to manage and download project files.</li></ul></li></ul><h2 id="download-files" tabindex="-1">Download Files <a class="header-anchor" href="#download-files" aria-label="Permalink to &quot;Download Files&quot;">​</a></h2><p>Before you begin the installation, ensure that you have the following files in your project directory:</p><ol><li><strong><code>install.sh</code></strong>: A bash script that sets up the environment, installs dependencies, and initializes the database.</li><li><strong><code>init.js</code></strong>: A JavaScript file that creates necessary configurations, generates passwords, and runs initialization scripts.</li><li><strong><code>initdatabase.sql</code></strong>: SQL script to set up the initial database structure.</li><li><strong><code>db.sql</code></strong>: SQL file containing the database dump (data) to be imported into the database.</li><li><strong><code>init/init.sql</code></strong>: SQL commands to create the necessary MySQL user and grant privileges to the <code>screeniedb</code> user.</li><li><strong><code>init/create_admin_user.sql</code></strong>: SQL script to create an admin user with a predefined password.</li><li><strong><code>data/config.json</code></strong>: Configuration file (ensure the <code>maindomain</code> is set correctly).</li></ol><p>Place all these files in the root of your project directory. This will ensure that the setup process can access all required files during the installation and initialization process.</p><h2 id="install-dependencies" tabindex="-1">Install Dependencies <a class="header-anchor" href="#install-dependencies" aria-label="Permalink to &quot;Install Dependencies&quot;">​</a></h2><p>You can choose between two installation methods: <strong>Vanilla Installation</strong> (includes all dependencies) or <strong>Custom Installation</strong> (skips dependency installation).</p><h4 id="option-1-vanilla-installation-includes-dependencies" tabindex="-1">Option 1: Vanilla Installation (Includes Dependencies) <a class="header-anchor" href="#option-1-vanilla-installation-includes-dependencies" aria-label="Permalink to &quot;Option 1: Vanilla Installation (Includes Dependencies)&quot;">​</a></h4><p>Run the following command to install <code>Node.js</code>, <code>npm</code>, <code>MariaDB</code>, and <code>pm2</code> globally, and update the package list:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --vanilla</span></span></code></pre></div><h4 id="option-2-custom-installation-skips-dependencies" tabindex="-1">Option 2: Custom Installation (Skips Dependencies) <a class="header-anchor" href="#option-2-custom-installation-skips-dependencies" aria-label="Permalink to &quot;Option 2: Custom Installation (Skips Dependencies)&quot;">​</a></h4><p>If you want more control and already have the necessary dependencies installed, run the script without the <code>--vanilla</code> flag:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install.sh</span></span></code></pre></div><h2 id="set-up-the-database" tabindex="-1">Set Up the Database <a class="header-anchor" href="#set-up-the-database" aria-label="Permalink to &quot;Set Up the Database&quot;">​</a></h2><p>Once the dependencies are installed, the script will proceed with setting up the database. This involves several steps:</p><ol><li><strong>Start the MariaDB Service:</strong> The command will automatically start the MariaDB service on your system.</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mariadb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mariadb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div><ol start="2"><li><strong>Execute initdatabase.sql:</strong> The script will run the initdatabase.sql file to initialize the database structure.</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -proot</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;source init/initdatabase.sql&quot;</span></span></code></pre></div><ol start="3"><li><strong>Generate SQL User and Password:</strong> A random password will be generated for the MySQL user <code>screeniedb</code> and written to a file for future reference.</li></ol><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>The file with the passwords will be saved to a text file name <code>passwords.txt</code> inside the <code>init</code> directory. After saving it someplace safe, please remove the file after securing the credentials, as it&#39;s not being removed automatically, and can cause security risks.</p></div><ol start="4"><li><strong>Create Admin User:</strong> The script will generate a new admin user for the application</li></ol><div class="language-plaintext vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>username: admin</span></span>
<span class="line"><span>password: screenieadmin</span></span></code></pre></div><p>and insert it into the database.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>After logging in with the admin user for the first time, you will be prompted to change the default password. The alert will pop up every time, until you change your default password.</p></div><p>The following SQL will be run:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> screenie;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users (username, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, permission_level, registration_date) </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;admin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;HashedAdminPassword&gt;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;CurrentTimestamp&gt;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><ol start="5"><li><strong>Final Database Setup:</strong> Once the users are created, the script will ensure that the permissions are set correctly.</li></ol><h2 id="configure-the-environment" tabindex="-1">Configure the Environment <a class="header-anchor" href="#configure-the-environment" aria-label="Permalink to &quot;Configure the Environment&quot;">​</a></h2><ol><li><strong>.env file</strong></li></ol><p>The script will create a .env file to store your database connection information. This file will contain the following:</p><div class="language-dotenv vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dotenv</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">DB_HOST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">DB_USER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">screeniedb</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">DB_PASSWORD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;GeneratedPassword&gt;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">DB_NAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">screenie</span></span></code></pre></div><ol start="2"><li><strong>password.txt file</strong></li></ol><p>The generated passwords for the MySQL user and admin user will be saved in <code>init/passwords.txt</code> for future reference.</p><div class="language-plaintext vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>SQL User Password: &lt;GeneratedPassword&gt;</span></span>
<span class="line"><span>Admin Password: screenieadmin</span></span></code></pre></div><ol start="3"><li><strong>Final Check</strong></li></ol><ul><li>Verify that the <code>maindomain</code> in <code>data/config.json</code> is set correctly.</li><li>Make sure the DB host IP (<code>DB_HOST</code>) is set up correctly in the <code>.env</code> file.</li></ul><h2 id="start-the-app" tabindex="-1">Start the app <a class="header-anchor" href="#start-the-app" aria-label="Permalink to &quot;Start the app&quot;">​</a></h2><p>After the setup is complete, you can start the application by following these steps:</p><ol><li><strong>Navigate to the Project Directory:</strong></li></ol><p>First, ensure you&#39;re in the project directory where the application files are located.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/your/project</span></span></code></pre></div><ol start="2"><li><strong>Install Node.js Dependencies:</strong> If you haven&#39;t already installed the required Node.js dependencies, run:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><ol start="3"><li><strong>Start the app:</strong> You can use <code>pm2</code> to start the application, which will help keep it running in the background.</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;screenie&quot;</span></span></code></pre></div><ol start="4"><li><strong>Check if the Application is Running:</strong> To check the status of the application, run:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span></code></pre></div><ol start="5"><li><strong>Open the app in your browser:</strong> Once the application is running, you can access it via your browser. Make sure that the <code>maindomain</code> is set correctly in <code>data/config.json</code> to point to the correct domain or IP address.</li></ol><p>Example:</p><div class="language-plaintext vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http://&lt;maindomain&gt;:&lt;nodeserverport&gt;</span></span></code></pre></div><h2 id="auto-start-on-system-boot-optional" tabindex="-1">Auto-Start on system boot (Optional) <a class="header-anchor" href="#auto-start-on-system-boot-optional" aria-label="Permalink to &quot;Auto-Start on system boot (Optional)&quot;">​</a></h2><p>If you want the application to automatically start after a reboot, you can set up auto-start with <code>pm2</code>:</p><ol><li><strong>Generate startup script:</strong> Run the following command to generate a startup script for your system:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> startup</span></span></code></pre></div><ol start="2"><li><strong>Save the pm2 process list:</strong> Save the current pm2 process list so it can restart after a reboot:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> save</span></span></code></pre></div><h2 id="monitoring-and-logs" tabindex="-1">Monitoring and Logs <a class="header-anchor" href="#monitoring-and-logs" aria-label="Permalink to &quot;Monitoring and Logs&quot;">​</a></h2><ol><li><strong>Monitor Application Logs:</strong> To view real-time logs for your application, use:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span></span></code></pre></div><p>You can also specify the application name to view logs for that specific app:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> screenie</span></span></code></pre></div><p>You can monitor the resource usage (CPU, memory, etc.) of the application by using:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> monit</span></span></code></pre></div><h2 id="stopping-the-application" tabindex="-1">Stopping the Application <a class="header-anchor" href="#stopping-the-application" aria-label="Permalink to &quot;Stopping the Application&quot;">​</a></h2><p>If you need to stop the application, you can use the following command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> screenie</span></span></code></pre></div><p>To completely remove it from pm2&#39;s process list, use:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> screenie</span></span></code></pre></div><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">​</a></h2><p>You&#39;ve successfully set up and deployed the application! You can now access it, monitor it using <code>pm2</code>, and make any updates as necessary. Make sure to check the logs for ongoing performance and error monitoring.</p>`,74)]))}const k=a(n,[["render",l]]);export{g as __pageData,k as default};
